version: 0.2

phases:
  install:
    commands:
      - cd frontend
      - npm install --silent --no-progress -g yarn
  pre_build:
    commands:
      - rm -rf .next out node_modules
      - yarn install  --silent
      - yarn build
    

  build:
    commands:
      - yarn test
      - yarn lint

cache:
  paths:
    - 'node_modules/**/*'
    - '.next/cache/**/*'

artifacts:
  files:
    - '**/*'
    
  base-directory: 'out'
